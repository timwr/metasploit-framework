
#SDKROOT=$(xcrun --sdk iphoneos --show-sdk-path)
#echo $SDKROOT

SDKROOT=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS11.1.sdk
SDKBIN=/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/
export PATH="$SDKBIN:/usr/local/bin:/usr/bin:/bin:$PATH"  
export CFLAGS="-DIOS -arch arm64 -miphoneos-version-min=7.0 -isysroot $SDKROOT"   
export CXXFLAGS="$CFLAGS"  
export CC="clang $CFLAGS"  
export CXX="clang++ $CXXFLAGS"  
export AR="ar"  
export RANLIB="ranlib"  
export STRIP="strip â€”-strip-unneeded"  
export MAKE="make -j4"  
export CONFIG_SITE="config.site"                  
       
cd amhello
autoreconf --install
./configure --host=aarch64-iphone-darwin --build=x86_64-apple-darwin
make
cd -

file amhello/src/hello
cp amhello/src/hello exec

