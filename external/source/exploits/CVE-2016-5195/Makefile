
all: install

build:
	ndk-build NDK_PROJECT_PATH=. APP_BUILD_SCRIPT=./Android.mk

install: build
	mv libs/armeabi/dirtycow ../../../../data/exploits/CVE-2016-5195.elf

push: build
	adb push libs/armeabi/dirtycow /data/local/tmp/dirtycow

run: push
	adb shell '/data/local/tmp/dirtycow "/system/lib/libc.so" capget'

clean:
	rm -rf libs
	rm -rf obj

